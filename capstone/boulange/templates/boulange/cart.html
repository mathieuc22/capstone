{% extends "boulange/layout.html" %}
{% load static %}

{% block body %}
<section class="container">
  <h1 class="container__title">My cart</h1>
  {% if message %}
  <div class="alert">{{ message }}</div>
  {% else %}
  <ul class="cart">
    {% for cart_item in cart_items %}
    <li class="cart__item">
      <div class="cart__content">
        <div class="cart__text">{{ cart_item.pastry.bakery.name }} - {{ cart_item.pastry.item }} (<span id="pastryPrice-{{ cart_item.pastry.pastry_id }}">{{cart_item.pastry.price}} €</span>)</div>
        <div class="cart__info">
          <select class="pastryQuantity" id="pastryQuantity-{{ cart_item.pastry.pastry_id }}">
            {% for i in '0123456789'|make_list %}
            <option value="{{ forloop.counter }}" {% if cart_item.quantity == forloop.counter %}selected{% endif %}>{{ forloop.counter }}</option>
            {% endfor %}
          </select>
          <div>
            <strong id="linePrice-{{ cart_item.pastry.pastry_id }}">{{ cart_item.getPrice }} €</strong>
          </div>
        </div>
      </div>
      <button type="button" class="cart__delete-item" id="delete-{{ cart_item.line_id }}"><i class="fas fa-trash"></i></button>
    </li>
    {% endfor %}
  </ul>
  <form action="{% url 'place_order' %}" method="POST">
    {% csrf_token %}
    <label for="order" hidden>Place order</label>
    <input class="btn" id="order" type="submit" value="Place order">
  </form>
  {% endif %}
</section>
{% endblock %}